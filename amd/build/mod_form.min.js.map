{"version":3,"file":"mod_form.min.js","sources":["../src/mod_form.js"],"sourcesContent":["import VideoManager from 'mod_video/video_manager';\nimport VideoManagerModal from 'mod_video/video_manager_modal';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport $ from 'jquery';\nimport Notification from 'core/notification';\n\n/**\n * Initialize functionality for module create/edit form.\n * @param {string} uniqueId\n * @param {string} videoSourceType\n * @param {string} inputId\n * @param {bool} debug\n */\nexport function init(uniqueId, videoSourceType, inputId, debug) {\n    let videoManagerInstance = null;\n\n    ModalFactory.create({\n        type: VideoManagerModal.TYPE,\n        templateContext: {uniqueid: uniqueId},\n        large: true,\n    }, $(`#id_searchvideos_${videoSourceType}`))\n        .then(function(modal) {\n            modal.getRoot().on(ModalEvents.shown, function() {\n                if (!videoManagerInstance) {\n                    videoManagerInstance = new VideoManager(\n                        uniqueId,\n                        videoSourceType,\n                        {\n                            onVideoSelect: (selectedVideo) => {\n                                document.getElementById(inputId).value = selectedVideo.videoid;\n                                modal.hide();\n                            },\n                            debug,\n                        }\n                    );\n                }\n            });\n            modal.getRoot().on('click', '.close-button', () => {\n                modal.hide();\n            });\n            return modal;\n        })\n        .catch(Notification.exception);\n}\n"],"names":["uniqueId","videoSourceType","inputId","debug","videoManagerInstance","create","type","VideoManagerModal","TYPE","templateContext","uniqueid","large","then","modal","getRoot","on","ModalEvents","shown","VideoManager","onVideoSelect","selectedVideo","document","getElementById","value","videoid","hide","catch","Notification","exception"],"mappings":"obAcqBA,SAAUC,gBAAiBC,QAASC,WACjDC,qBAAuB,4BAEdC,OAAO,CAChBC,KAAMC,6BAAkBC,KACxBC,gBAAiB,CAACC,SAAUV,UAC5BW,OAAO,IACR,8CAAsBV,mBACpBW,MAAK,SAASC,cACXA,MAAMC,UAAUC,GAAGC,sBAAYC,OAAO,WAC7Bb,uBACDA,qBAAuB,IAAIc,uBACvBlB,SACAC,gBACA,CACIkB,cAAgBC,gBACZC,SAASC,eAAepB,SAASqB,MAAQH,cAAcI,QACvDX,MAAMY,QAEVtB,MAAAA,YAKhBU,MAAMC,UAAUC,GAAG,QAAS,iBAAiB,KACzCF,MAAMY,UAEHZ,SAEVa,MAAMC,sBAAaC"}